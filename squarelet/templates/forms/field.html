{% load crispy_forms_field %}

{% if field.is_hidden %}
  {{ field }}
{% else %}
  <div class="field{% if wrapper_class %} {{ wrapper_class }}{% endif %}{% if field.css_classes %} {{ field.css_classes }}{% endif %}">
    {% if field.label and form_show_labels %}
      <label {% if field.id_for_label %}for="{{ field.id_for_label }}" {% endif %}class="field-label{% if field.field.required %} required{% endif %}">
        {{ field.label|safe }}
        {% if field.field.required %}<span class="required-mark">*</span>{% endif %}
      </label>
    {% endif %}

    {% if field|is_checkboxselectmultiple %}
      {% include 'forms/layout/checkboxselectmultiple.html' %}
    {% elif field|is_radioselect %}
      {% include 'forms/layout/radioselect.html' %}
    {% else %}
      {% crispy_field field %}
    {% endif %}

    {% if field.help_text %}
      <small class="help-text">{{ field.help_text|safe }}</small>
    {% endif %}

    {% if field.errors %}
      <div class="field-errors">
        {% for error in field.errors %}
          <span class="error">{{ error }}</span>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endif %}
